{"version":3,"sources":["index.js"],"names":["Assignment","props","_this","Object","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","onSubmit","e","preventDefault","errors","state","formdata","validForm","x","i","data","length","type","console","log","api","action","fetch","uri","method","body","JSON","stringify","passData","then","response","status","alert","catch","err","alertMsg","concat","setForm","map","m","key","name","validations","date","errorMsg","errs","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","class","onClick","label","validateIt","ref","onChange","isLoaded","firstLoad","bind","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","now","Date","dt","parse","toString","message","temp","value","split","moment","add","target","setState","_this2","res","json","_this$state","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.02340c17.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport moment from 'moment'\r\nclass Assignment extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      formdata: null,\r\n      isLoaded : false,\r\n      errors : {},\r\n      passData : {},\r\n      firstLoad : true\r\n    };\r\nthis.onChange = this.onChange.bind(this);\r\nthis.onSubmit = this.onSubmit.bind(this);\r\n  };\r\n\r\nvalidateIt(validations,date){\r\n    let now = new Date()\r\n    let dt = new Date(Date.parse(date))\r\n    if(date!==''&&dt.toString()==='Invalid Date'){\r\n      return 'Invalid Date'\r\n    }\r\n    for(var i=0;i<validations.length;i++){\r\n      if(validations[i].name==='required'){\r\n        if(date===''){\r\n          return validations[i].message\r\n        }\r\n      }\r\n      else if(validations[i].name==='min'){\r\n        var temp = validations[i].value.split(\" \");\r\n        if(dt<now){\r\n        let min = moment(now).add(temp[0],temp[1]);\r\n        if(dt<min){\r\n          return validations[i].message\r\n        }\r\n      }\r\n      }\r\n      else if(validations[i].name==='max'){\r\n        var temp = validations[i].value.split(\" \");\r\n        if(dt>now){\r\n        let max = moment(now).add(temp[0],temp[1]);\r\n        if(dt>max){\r\n          return validations[i].message\r\n        }\r\n      }\r\n      }\r\n    }\r\n    return null\r\n}\r\n\r\nonChange(e,key){\r\n  var data = this.state.passData\r\n  data[key] = e.target.value\r\n    this.setState({\r\n      passData : data\r\n    })\r\n  console.log(this.state.passData)\r\n}\r\n//Send state to the server code\r\n componentDidMount(){\r\n  fetch('https://ca.platform.simplifii.xyz/api/v1/static/assignment9').\r\n  then(res=>res.json()).\r\n  then(json =>{\r\n    this.setState({\r\n      formdata : json.response,\r\n      isLoaded : true\r\n    })\r\n  });\r\n}\r\n\r\nonSubmit = (e) => {\r\n  e.preventDefault();\r\n  let errors = this.state.errors\r\n  let formdata = this.state.formdata\r\n  let validForm = true\r\n  for(var x in errors){\r\n    if(errors[x]!==null){\r\n      validForm = false\r\n      break\r\n    }\r\n  }\r\n  if(validForm)\r\n  {\r\n  var i = 0\r\n  while(i<formdata.data.length){\r\n    if(formdata.data[i].type === 'button'){\r\n      break;\r\n    }\r\n    else {\r\n      i++;\r\n    }\r\n  }\r\n  console.log(formdata.data[i].api)\r\n  if(formdata.data[i].action==='api')\r\n    var action = formdata.data[i].api\r\n  fetch(action.uri, {\r\n    method: action.method,\r\n    body: JSON.stringify(this.state.passData),\r\n  }).then(response => {\r\n    if (response.status >= 200 && response.status < 300) {\r\n      alert('Data Posted Successfully. Response posted in console')\r\n      console.log(response)\r\n        return response;\r\n        window.location.reload();\r\n      } else {\r\n       alert('Something happened wrong');\r\n      }\r\n    }).catch(err => err);\r\n}\r\nelse{\r\n    var alertMsg = ''\r\n    for(var x in errors){\r\n      if(errors[x]){\r\n        alertMsg = alertMsg.concat(errors[x],'\\n')\r\n      }\r\n    }\r\n    alert(alertMsg)\r\n}\r\n}\r\nsetForm = () => {\r\n    let formdata = this.state.formdata.data;\r\n    let myForm = formdata.map((m)=>{\r\n    let key = m.name;\r\n    let type = m.type==='datetime'?'datetime-local':''\r\n    let validations = m.validations\r\n    let date =  this.state.passData[key] || ''\r\n    let errorMsg = ''\r\n    let errs = this.state.errors\r\n    //console.log(key,type,validations)\r\n    if(m.type==='button')\r\n    return(\r\n      <div class = \"container-contact1-form-btn\">\r\n      <button class = \"contact1-form-btn\" onClick = {(e)=>this.onSubmit(e)}>\r\n      {m.label}\r\n      </button>\r\n      </div>\r\n    )\r\n    else {\r\n      errorMsg=this.validateIt(validations,date)\r\n      errs[key] = errorMsg\r\n      this.state.errors = errs\r\n      return(\r\n        <div key = {key} class=\"wrap-input1\">\r\n          <label key = {'L'+m.key}>\r\n          {m.label} :\r\n          </label>\r\n          <input ref = {(key)=>{this[m.key]=key}}\r\n          class = \"input1\"\r\n          type = {type}\r\n          key = {'I'+m.key}\r\n          onChange = {(e)=>{this.onChange(e,key)}}\r\n          />\r\n          <p> {errorMsg} </p>\r\n          </div>\r\n      )\r\n    }\r\n  });\r\n  return myForm\r\n}\r\n\r\nrender(){\r\n  var {formdata,isLoaded} = this.state\r\n\r\n  if (!isLoaded)\r\n    return <div class = \"loader\"></div>\r\n    else\r\n      {\r\n        console.log(this.state.formdata)\r\n        return(\r\n        <form class = \"contact1-form\">\r\n        {this.setForm()}\r\n        </form>\r\n        )\r\n  }\r\n}\r\n}\r\nReactDOM.render(<Assignment/>, document.getElementById('root'));\r\n"],"sourceRoot":""}