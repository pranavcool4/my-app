{"version":3,"sources":["index.js"],"names":["Assignment","props","_this","Object","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","onChange","date","formdata","state","setState","console","log","dateEmpty","validateIt","data","validations","isLoaded","Date","dateValid","myForm","errMessage","bind","C_Users_Pranav_Arora_Desktop_my_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","onSubmit","dt","arguments","length","undefined","q","i","name","now","temp","value","split","moment","add","message","_this2","fetch","then","res","json","response","type","api","action","uri","method","body","JSON","stringify","status","alert","catch","err","form","push","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","class","label","react_datetime_picker__WEBPACK_IMPORTED_MODULE_10___default","onClick","style","color","_this$state","setForm","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b44527a3.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport moment from 'moment'\r\nimport DateTimePicker from 'react-datetime-picker';\r\nclass Assignment extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      formdata: null,\r\n      isLoaded : false,\r\n      date : new Date(),\r\n      dateValid : false,\r\n      dateEmpty : true,\r\n      myForm : [],\r\n      errMessage : ''\r\n    };\r\nthis.onChange = this.onChange.bind(this);\r\nthis.onSubmit = this.onSubmit.bind(this);\r\n  };\r\n\r\nvalidateIt(validations,dt,cvs=false){\r\n  if(cvs){\r\n    this.state.dateEmpty = false\r\n  }\r\n  var q = false\r\n  for (var i = 0 ; i<validations.length; i++){\r\n    if (validations[i].name==='min'&&q!==true){\r\n      let now = new Date()\r\n      var temp = validations[i].value.split(\" \");\r\n      if(dt<now){\r\n        let min = moment(now).add(temp[0],temp[1]);\r\n        if(dt<min){\r\n          this.state.dateEmpty = true\r\n          q = true\r\n          //alert(validations[i].message)\r\n          this.state.errMessage = validations[i].message\r\n        }\r\n      }\r\n    }\r\n    else if (validations[i].name==='max'&&q!==true){\r\n      let now = new Date()\r\n      var temp = validations[i].value.split(\" \");\r\n      if(dt>now){\r\n        let max = moment(now).add(temp[0],temp[1]);\r\n        if(dt>max){\r\n          q = true\r\n          //alert(validations[i].message)\r\n          this.state.errMessage = validations[i].message\r\n        }\r\n      }\r\n    }\r\n    else if(validations[i].name==='required'&&this.state.dateEmpty&&q!==true){\r\n      q = true\r\n      //alert(validations[i].message)\r\n      this.state.errMessage = validations[i].message\r\n      }\r\n    if(q){\r\n      this.state.dateValid = false\r\n    }\r\n    else{\r\n      this.state.errMessage = ''\r\n      this.state.dateValid = true\r\n    }\r\n    }\r\n}\r\n\r\nonChange = date => {\r\nvar {formdata} = this.state\r\nthis.setState({date})\r\nconsole.log(date)\r\nthis.setState({dateEmpty:false},console.log(this.state.dateEmpty))\r\nthis.validateIt(formdata.data[0].validations,date,true)\r\n}\r\n//Send state to the server code\r\n\r\n componentDidMount(){\r\n  fetch('https://ca.platform.simplifii.xyz/api/v1/static/assignment9').\r\n  then(res=>res.json()).\r\n  then(json =>{\r\n    this.setState({\r\n      formdata : json.response,\r\n      isLoaded : true\r\n    })\r\n  });\r\n}\r\n\r\nonSubmit() {\r\n  var {formdata} = this.state\r\n  if(!this.state.dateEmpty&&this.state.dateValid)\r\n  {\r\n  var i = 0\r\n  while(i<formdata.data.length){\r\n    if(formdata.data[i].type === 'button'){\r\n      break;\r\n    }\r\n    else {\r\n      i++;\r\n    }\r\n  }\r\n  console.log(formdata.data[i].api)\r\n  if(formdata.data[i].action==='api')\r\n    var action = formdata.data[i].api\r\n  var name = formdata.data[0].name\r\n  var date = this.state.date\r\n  var data = {}\r\n  data[name] = date\r\n  fetch(action.uri, {\r\n    method: action.method,\r\n    body: JSON.stringify(data),\r\n  }).then(response => {\r\n    if (response.status >= 200 && response.status < 300) {\r\n      alert('Data Posted Successfully')\r\n        return response;\r\n        console.log(response);\r\n        window.location.reload();\r\n      } else {\r\n       alert('Something happened wrong');\r\n      }\r\n    }).catch(err => err);\r\n}\r\nelse{\r\n  this.validateIt(formdata.data[0].validations,this.state.date)\r\n  alert(this.state.errMessage)\r\n  console.log(this.state.dateEmpty,this.state.date)\r\n}\r\n}\r\nsetForm(data,message = ''){\r\n  let form = []\r\n  for (var i = 0;i<data.length;i++){\r\n    if(data[i].type==='datetime'){\r\n      form.push((<div class=\"contact1-form-title\">{data[i].label}</div>))\r\n      form.push(\r\n      (<div>\r\n      <DateTimePicker class = \"wrap-input1 validate-input\"\r\n      onChange={this.onChange}\r\n      value={this.state.date}></DateTimePicker>\r\n      </div>)\r\n    )\r\n    }\r\n    else if(data[i].type==='button')\r\n    {\r\n      form.push(\r\n        (<div class = \"container-contact1-form-btn\">\r\n        <button class = \"contact1-form-btn\" onClick = {this.onSubmit}>\r\n        {data[i].label}\r\n        </button>\r\n        </div>\r\n        )\r\n      )\r\n    }\r\n  }\r\n  form.push(\r\n    (<div>\r\n    <p style = {{color:'red'}}>{message}</p>\r\n  </div>)\r\n  )\r\n  this.state.myForm = form\r\n}\r\nrender(){\r\n  var {formdata,isLoaded} = this.state\r\n  if (!isLoaded)\r\n    return <div class = \"loader\"></div>\r\n    else\r\n      {\r\n        this.setForm(formdata.data,this.state.errMessage)\r\n        return this.state.myForm\r\n  }\r\n  return null\r\n}\r\n}\r\nReactDOM.render(<Assignment/>, document.getElementById('root'));\r\n"],"sourceRoot":""}